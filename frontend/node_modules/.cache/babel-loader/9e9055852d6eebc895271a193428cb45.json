{"ast":null,"code":"import _regeneratorRuntime from\"/home/leo/srv/recommender/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/leo/srv/recommender/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/leo/srv/recommender/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import axios from'axios';var books=['The Republic','Candide','Beyond Good & Evil','Crime & Punishment','Gulag Archipelago'];function Recommender(){var _useState=useState(books),_useState2=_slicedToArray(_useState,2),recommendations=_useState2[0],setRecommendations=_useState2[1];var onLogin=setRecommendations;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Credentials,{onLogin:onLogin}),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(BookList,{books:recommendations}));}function Credentials(props){var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLogged=_useState6[0],setIsLogged=_useState6[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var usr,pwd,postobj,reply;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();usr=event.target.parentElement.usr.value;pwd=event.target.parentElement.pwd.value;postobj={usr:usr,pwd:pwd};_context.prev=4;_context.next=7;return axios.post('login.php',postobj);case 7:reply=_context.sent;// authentication success\nconsole.log(reply.data);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);// authentication failure\nconsole.log(_context.t0.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[4,11]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();var handleRegister=function handleRegister(event){event.preventDefault();console.log(event.target.parentElement.usr.value);};if(!isLogged){return/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"usr\",placeholder:\"Username\",autocomplete:\"off\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"pwd\",placeholder:\"Password\",autocomplete:\"off\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:handleLogin},\"Login\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:handleRegister},\"Register\"));}else{return/*#__PURE__*/React.createElement(\"div\",null,\"Logged In! \",props.data);}}function BookList(props){var books=props.books;var listItems=books.map(function(book){return/*#__PURE__*/React.createElement(\"li\",null,book);});return/*#__PURE__*/React.createElement(\"ul\",null,listItems);}ReactDOM.render(/*#__PURE__*/React.createElement(Recommender,null),document.getElementById('root'));","map":{"version":3,"sources":["/home/leo/srv/recommender/frontend/src/index.js"],"names":["React","useState","useEffect","ReactDOM","axios","books","Recommender","recommendations","setRecommendations","onLogin","Credentials","props","username","setUsername","isLogged","setIsLogged","handleLogin","event","preventDefault","usr","target","parentElement","value","pwd","postobj","post","reply","console","log","data","message","handleRegister","BookList","listItems","map","book","render","document","getElementById"],"mappings":"4VAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,KAAK,CAAG,CAAC,cAAD,CAAiB,SAAjB,CAA4B,oBAA5B,CAAkD,oBAAlD,CAAwE,mBAAxE,CAAd,CAEA,QAASC,CAAAA,WAAT,EAAuB,eACyBL,QAAQ,CAACI,KAAD,CADjC,wCACdE,eADc,eACGC,kBADH,eAGrB,GAAMC,CAAAA,OAAO,CAAGD,kBAAhB,CAEA,mBACE,4CACE,8BADF,cAEE,oBAAC,WAAD,EAAa,OAAO,CAAEC,OAAtB,EAFF,cAGE,8BAHF,cAIE,oBAAC,QAAD,EAAU,KAAK,CAAEF,eAAjB,EAJF,CADF,CAQD,CAED,QAASG,CAAAA,WAAT,CAAqBC,KAArB,CAA4B,gBACMV,QAAQ,CAAC,IAAD,CADd,yCACnBW,QADmB,eACTC,WADS,8BAEMZ,QAAQ,CAAC,KAAD,CAFd,yCAEnBa,QAFmB,eAETC,WAFS,eAI1B,GAAMC,CAAAA,WAAW,0FAAG,iBAAMC,KAAN,4IAClBA,KAAK,CAACC,cAAN,GACIC,GAFc,CAERF,KAAK,CAACG,MAAN,CAAaC,aAAb,CAA2BF,GAA3B,CAA+BG,KAFvB,CAGdC,GAHc,CAGRN,KAAK,CAACG,MAAN,CAAaC,aAAb,CAA2BE,GAA3B,CAA+BD,KAHvB,CAKZE,OALY,CAKF,CAACL,GAAG,CAAEA,GAAN,CAAWI,GAAG,CAAEA,GAAhB,CALE,uCAOEnB,CAAAA,KAAK,CAACqB,IAAN,CAAW,WAAX,CAAwBD,OAAxB,CAPF,QAOZE,KAPY,eAShB;AACAC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,IAAlB,EAVgB,iFAahB;AACAF,OAAO,CAACC,GAAR,CAAY,YAAEE,OAAd,EAdgB,qEAAH,kBAAXd,CAAAA,WAAW,4CAAjB,CAmBA,GAAMe,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAd,KAAK,CAAI,CAC9BA,KAAK,CAACC,cAAN,GACAS,OAAO,CAACC,GAAR,CAAYX,KAAK,CAACG,MAAN,CAAaC,aAAb,CAA2BF,GAA3B,CAA+BG,KAA3C,EAED,CAJD,CAMA,GAAG,CAACR,QAAJ,CAAc,CACZ,mBACE,6CACE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,KAAxB,CAA8B,WAAW,CAAC,UAA1C,CAAqD,YAAY,CAAC,KAAlE,EADF,cAEE,6BAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,KAA5B,CAAkC,WAAW,CAAC,UAA9C,CAAyD,YAAY,CAAC,KAAtE,EAFF,cAGE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEE,WAA/B,UAHF,cAIE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEe,cAA/B,aAJF,CADF,CAQD,CATD,IASO,CACL,mBACE,6CAAiBpB,KAAK,CAACkB,IAAvB,CADF,CAGD,CACF,CAED,QAASG,CAAAA,QAAT,CAAkBrB,KAAlB,CAAyB,CACvB,GAAMN,CAAAA,KAAK,CAAGM,KAAK,CAACN,KAApB,CACA,GAAM4B,CAAAA,SAAS,CAAG5B,KAAK,CAAC6B,GAAN,CAAU,SAACC,IAAD,qBAAU,8BAAKA,IAAL,CAAV,EAAV,CAAlB,CAEA,mBACE,8BAAKF,SAAL,CADF,CAGD,CAED9B,QAAQ,CAACiC,MAAT,cAAgB,oBAAC,WAAD,MAAhB,CAAgCC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAhC","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\n\nconst books = ['The Republic', 'Candide', 'Beyond Good & Evil', 'Crime & Punishment', 'Gulag Archipelago'];\n\nfunction Recommender() {\n  const [recommendations, setRecommendations] = useState(books);\n\n  const onLogin = setRecommendations;\n\n  return(\n    <div>\n      <hr/>\n      <Credentials onLogin={onLogin}/>\n      <hr/>\n      <BookList books={recommendations} />\n    </div>\n  );\n}\n\nfunction Credentials(props) {\n  const [username, setUsername] = useState(null);\n  const [isLogged, setIsLogged] = useState(false);\n\n  const handleLogin = async(event) => {\n    event.preventDefault();\n    let usr = event.target.parentElement.usr.value;\n    let pwd = event.target.parentElement.pwd.value;\n\n    const postobj = {usr: usr, pwd: pwd};\n    try {\n      var reply = await axios.post('login.php', postobj);\n      \n      // authentication success\n      console.log(reply.data);\n\n    } catch(e) {\n      // authentication failure\n      console.log(e.message);\n    }\n\n  }\n\n  const handleRegister = event => {\n    event.preventDefault();\n    console.log(event.target.parentElement.usr.value);\n\n  }\n\n  if(!isLogged) {\n    return(\n      <form>\n        <input type=\"text\" name=\"usr\" placeholder=\"Username\" autocomplete=\"off\"></input>\n        <input type=\"password\" name=\"pwd\" placeholder=\"Password\" autocomplete=\"off\"></input>\n        <button type=\"submit\" onClick={handleLogin}>Login</button>  \n        <button type=\"submit\" onClick={handleRegister}>Register</button>\n      </form>\n    );\n  } else {\n    return(\n      <div>Logged In! {props.data}</div>\n    );\n  }\n}\n\nfunction BookList(props) {\n  const books = props.books;\n  const listItems = books.map((book) => <li>{book}</li>);\n\n  return(\n    <ul>{listItems}</ul>\n  );\n}\n\nReactDOM.render(<Recommender/>, document.getElementById('root'));"]},"metadata":{},"sourceType":"module"}